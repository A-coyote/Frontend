{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Box,TextField,Button,Grid,Typography,FormControl,Select,MenuItem,InputLabel,Alert}from'@mui/material';import{useNavigate,useParams}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditarHito=()=>{const{id_hito}=useParams();const[titulo,setTitulo]=useState('');const[descripcion,setDescripcion]=useState('');const[fechaInicio,setFechaInicio]=useState('');const[fechaFin,setFechaFin]=useState('');const[estado,setEstado]=useState('');const[showAlert,setShowAlert]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchHito=async()=>{try{const token=localStorage.getItem('token');const{data}=await axios.get(`http://localhost:5000/api/hitos/EditarHito/${id_hito}`,{headers:{'x-auth-token':token}});// Pre-carga los datos del hito en los campos del formulario\nsetTitulo(data.nombre_hito);setDescripcion(data.descripcion);setFechaInicio(data.fecha_inicio.split('T')[0]);setFechaFin(data.fecha_fin.split('T')[0]);setEstado(data.estado);}catch(error){var _error$response,_error$response$data;setShowAlert({severity:'error',message:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.msg)||'Error al cargar los datos del hito.'});}};fetchHito();},[id_hito]);const handleUpdate=async e=>{e.preventDefault();// Validaciones en el frontend\nif(!titulo||!descripcion||!fechaInicio||!fechaFin||!estado){setShowAlert({severity:'error',message:'Todos los campos son requeridos.'});return;}// Enviar la solicitud PUT solo si los datos son válidos\ntry{const token=localStorage.getItem('token');const updatedHito={nombre_hito:titulo,descripcion,fecha_inicio:fechaInicio,fecha_fin:fechaFin,estado};await axios.put(`http://localhost:5000/api/hitos/EditHito/${id_hito}`,updatedHito,{headers:{'x-auth-token':token}});setShowAlert({severity:'success',message:'Hito actualizado exitosamente.'});setTimeout(()=>navigate(-1),2000);// Regresa a la página anterior\n}catch(error){var _error$response2,_error$response2$data;setShowAlert({severity:'error',message:((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.msg)||'Error al actualizar el hito.'});}};return/*#__PURE__*/_jsxs(Box,{sx:{padding:5},children:[showAlert&&/*#__PURE__*/_jsx(Alert,{severity:showAlert.severity,sx:{mb:4},children:showAlert.message}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Editar Hito\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleUpdate,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"T\\xEDtulo del Hito\",value:titulo,onChange:e=>setTitulo(e.target.value),required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Descripci\\xF3n\",value:descripcion,onChange:e=>setDescripcion(e.target.value),required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Fecha de inicio\",type:\"date\",InputLabelProps:{shrink:true},value:fechaInicio,onChange:e=>setFechaInicio(e.target.value),required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Fecha de finalizaci\\xF3n\",type:\"date\",InputLabelProps:{shrink:true},value:fechaFin,onChange:e=>setFechaFin(e.target.value),required:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{children:\"Estado\"}),/*#__PURE__*/_jsxs(Select,{value:estado,onChange:e=>setEstado(e.target.value),label:\"Estado\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Pendiente\",children:\"Pendiente\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"En Proceso\",children:\"En Proceso\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Finalizado\",children:\"Finalizado\"})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,children:\"Actualizar Hito\"})})]})})]});};export default EditarHito;","map":{"version":3,"names":["React","useState","useEffect","Box","TextField","Button","Grid","Typography","FormControl","Select","MenuItem","InputLabel","Alert","useNavigate","useParams","axios","jsx","_jsx","jsxs","_jsxs","EditarHito","id_hito","titulo","setTitulo","descripcion","setDescripcion","fechaInicio","setFechaInicio","fechaFin","setFechaFin","estado","setEstado","showAlert","setShowAlert","navigate","fetchHito","token","localStorage","getItem","data","get","headers","nombre_hito","fecha_inicio","split","fecha_fin","error","_error$response","_error$response$data","severity","message","response","msg","handleUpdate","e","preventDefault","updatedHito","put","setTimeout","_error$response2","_error$response2$data","sx","padding","children","mb","variant","gutterBottom","onSubmit","container","spacing","item","xs","sm","fullWidth","label","value","onChange","target","required","type","InputLabelProps","shrink","color"],"sources":["C:/Users/Administrador/Documents/Proyectos/control_calidad/frontend/src/pages/Gestiones/EditarHito.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n    Box,\r\n    TextField,\r\n    Button,\r\n    Grid,\r\n    Typography,\r\n    FormControl,\r\n    Select,\r\n    MenuItem,\r\n    InputLabel,\r\n    Alert,\r\n} from '@mui/material';\r\nimport { useNavigate, useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst EditarHito = () => {\r\n    const { id_hito } = useParams();\r\n    const [titulo, setTitulo] = useState('');\r\n    const [descripcion, setDescripcion] = useState('');\r\n    const [fechaInicio, setFechaInicio] = useState('');\r\n    const [fechaFin, setFechaFin] = useState('');\r\n    const [estado, setEstado] = useState('');\r\n    const [showAlert, setShowAlert] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const fetchHito = async () => {\r\n            try {\r\n                const token = localStorage.getItem('token');\r\n                const { data } = await axios.get(`http://localhost:5000/api/hitos/EditarHito/${id_hito}`, {\r\n                    headers: { 'x-auth-token': token },\r\n                });\r\n                // Pre-carga los datos del hito en los campos del formulario\r\n                setTitulo(data.nombre_hito);\r\n                setDescripcion(data.descripcion);\r\n                setFechaInicio(data.fecha_inicio.split('T')[0]);\r\n                setFechaFin(data.fecha_fin.split('T')[0]);\r\n                setEstado(data.estado);\r\n            } catch (error) {\r\n                setShowAlert({\r\n                    severity: 'error',\r\n                    message: error.response?.data?.msg || 'Error al cargar los datos del hito.',\r\n                });\r\n            }\r\n        };\r\n        fetchHito();\r\n    }, [id_hito]);\r\n\r\n    const handleUpdate = async (e) => {\r\n        e.preventDefault();\r\n\r\n        // Validaciones en el frontend\r\n        if (!titulo || !descripcion || !fechaInicio || !fechaFin || !estado) {\r\n            setShowAlert({ severity: 'error', message: 'Todos los campos son requeridos.' });\r\n            return;\r\n        }\r\n\r\n        // Enviar la solicitud PUT solo si los datos son válidos\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const updatedHito = { nombre_hito: titulo, descripcion, fecha_inicio: fechaInicio, fecha_fin: fechaFin, estado };\r\n\r\n            await axios.put(`http://localhost:5000/api/hitos/EditHito/${id_hito}`, updatedHito, {\r\n                headers: { 'x-auth-token': token },\r\n            });\r\n\r\n            setShowAlert({ severity: 'success', message: 'Hito actualizado exitosamente.' });\r\n            setTimeout(() => navigate(-1), 2000); // Regresa a la página anterior\r\n        } catch (error) {\r\n            setShowAlert({ severity: 'error', message: error.response?.data?.msg || 'Error al actualizar el hito.' });\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <Box sx={{ padding: 5 }}>\r\n            {showAlert && (\r\n                <Alert severity={showAlert.severity} sx={{ mb: 4 }}>\r\n                    {showAlert.message}\r\n                </Alert>\r\n            )}\r\n            <Typography variant=\"h5\" gutterBottom>Editar Hito</Typography>\r\n            <form onSubmit={handleUpdate}>\r\n                <Grid container spacing={2}>\r\n                    <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            fullWidth\r\n                            label=\"Título del Hito\"\r\n                            value={titulo}\r\n                            onChange={(e) => setTitulo(e.target.value)}\r\n                            required\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            fullWidth\r\n                            label=\"Descripción\"\r\n                            value={descripcion}\r\n                            onChange={(e) => setDescripcion(e.target.value)}\r\n                            required\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            fullWidth\r\n                            label=\"Fecha de inicio\"\r\n                            type=\"date\"\r\n                            InputLabelProps={{ shrink: true }}\r\n                            value={fechaInicio}\r\n                            onChange={(e) => setFechaInicio(e.target.value)}\r\n                            required\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6}>\r\n                        <TextField\r\n                            fullWidth\r\n                            label=\"Fecha de finalización\"\r\n                            type=\"date\"\r\n                            InputLabelProps={{ shrink: true }}\r\n                            value={fechaFin}\r\n                            onChange={(e) => setFechaFin(e.target.value)}\r\n                            required\r\n                        />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6}>\r\n                        <FormControl fullWidth>\r\n                            <InputLabel>Estado</InputLabel>\r\n                            <Select value={estado} onChange={(e) => setEstado(e.target.value)} label=\"Estado\">\r\n                                <MenuItem value=\"Pendiente\">Pendiente</MenuItem>\r\n                                <MenuItem value=\"En Proceso\">En Proceso</MenuItem>\r\n                                <MenuItem value=\"Finalizado\">Finalizado</MenuItem>\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                        <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth>\r\n                            Actualizar Hito\r\n                        </Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </form>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default EditarHito;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}