{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrador\\\\Documents\\\\Proyectos\\\\control_calidad\\\\frontend\\\\src\\\\pages\\\\Gestiones\\\\Proyectos.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Button, TextField, Table, TableBody, TableCell, TableContainer, TableFooter, TablePagination, TableRow, TableHead, Paper, Box, Grid, IconButton } from '@mui/material';\nimport { useNavigate } from 'react-router-dom';\nimport { useTheme } from '@mui/material/styles';\nimport FirstPageIcon from '@mui/icons-material/FirstPage';\nimport KeyboardArrowLeft from '@mui/icons-material/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@mui/icons-material/KeyboardArrowRight';\nimport LastPageIcon from '@mui/icons-material/LastPage';\nimport EditIcon from '@mui/icons-material/Edit';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\nimport AlertMessage from '../../components/AlertMessage'; // Alert component\nimport ConfirmDeleteDialog from '../../components/ConfirmDeleteDialog'; // Confirmation dialog component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction TablePaginationActions(props) {\n  _s();\n  const theme = useTheme();\n  const {\n    count,\n    page,\n    rowsPerPage,\n    onPageChange\n  } = props;\n  const handleFirstPageButtonClick = event => {\n    onPageChange(event, 0);\n  };\n  const handleBackButtonClick = event => {\n    onPageChange(event, page - 1);\n  };\n  const handleNextButtonClick = event => {\n    onPageChange(event, page + 1);\n  };\n  const handleLastPageButtonClick = event => {\n    onPageChange(event, Math.max(0, Math.ceil(count / rowsPerPage) - 1));\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      flexShrink: 0,\n      ml: 2.5\n    },\n    children: [/*#__PURE__*/_jsxDEV(IconButton, {\n      onClick: handleFirstPageButtonClick,\n      disabled: page === 0,\n      \"aria-label\": \"first page\",\n      children: theme.direction === 'rtl' ? /*#__PURE__*/_jsxDEV(LastPageIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 40\n      }, this) : /*#__PURE__*/_jsxDEV(FirstPageIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 59\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n      onClick: handleBackButtonClick,\n      disabled: page === 0,\n      \"aria-label\": \"previous page\",\n      children: theme.direction === 'rtl' ? /*#__PURE__*/_jsxDEV(KeyboardArrowRight, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 40\n      }, this) : /*#__PURE__*/_jsxDEV(KeyboardArrowLeft, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 65\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n      onClick: handleNextButtonClick,\n      disabled: page >= Math.ceil(count / rowsPerPage) - 1,\n      \"aria-label\": \"next page\",\n      children: theme.direction === 'rtl' ? /*#__PURE__*/_jsxDEV(KeyboardArrowLeft, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 40\n      }, this) : /*#__PURE__*/_jsxDEV(KeyboardArrowRight, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 64\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n      onClick: handleLastPageButtonClick,\n      disabled: page >= Math.ceil(count / rowsPerPage) - 1,\n      \"aria-label\": \"last page\",\n      children: theme.direction === 'rtl' ? /*#__PURE__*/_jsxDEV(FirstPageIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 40\n      }, this) : /*#__PURE__*/_jsxDEV(LastPageIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 60\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 7\n  }, this);\n}\n_s(TablePaginationActions, \"VrMvFCCB9Haniz3VCRPNUiCauHs=\", false, function () {\n  return [useTheme];\n});\n_c = TablePaginationActions;\nconst Proyectos = ({\n  permissions\n}) => {\n  _s2();\n  const [openDialog, setOpenDialog] = useState(false);\n  const [selectedProyectoId, setSelectedProyectoId] = useState(null);\n  const [showAlert, setShowAlert] = useState(null);\n  const [proyectos, setProyectos] = useState([]);\n  const [search, setSearch] = useState('');\n  const [page, setPage] = useState(0);\n  const [rowsPerPage, setRowsPerPage] = useState(5);\n  const navigate = useNavigate();\n  const alertTimeout = useRef(null);\n  const handleOpenDialog = proyectoId => {\n    setSelectedProyectoId(proyectoId);\n    setOpenDialog(true);\n  };\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n    setSelectedProyectoId(null);\n  };\n  // Handle task creation\n  const handleVerPorHitos = id => {\n    navigate(`/proyectos/hitos-pruebas/${id}`); // Redireccion a la página de crear tarea\n  };\n  const fetchProyectos = async (searchTerm = '') => {\n    const response = await fetch(`http://localhost:5000/api/proyectos/proyectos?search=${searchTerm}`);\n    const data = await response.json();\n    setProyectos(data);\n  };\n  useEffect(() => {\n    fetchProyectos(search);\n  }, [search]);\n  const handlePageChange = (event, newPage) => {\n    setPage(newPage);\n  };\n  const handleRowsPerPageChange = event => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n  const handleCrearProyecto = () => {\n    navigate('/gestiones/crear-proyectos');\n  };\n  const handleEliminarProyecto = async () => {\n    try {\n      const response = await fetch(`http://localhost:5000/api/proyectos/proyectoDelete/${selectedProyectoId}`, {\n        method: 'DELETE'\n      });\n      if (response.ok) {\n        setShowAlert({\n          severity: 'success',\n          message: 'Proyecto eliminado exitosamente'\n        });\n        fetchProyectos(search);\n      } else {\n        setShowAlert({\n          severity: 'error',\n          message: 'Error al eliminar el proyecto'\n        });\n      }\n    } catch (error) {\n      console.error('Error al eliminar el proyecto:', error);\n      setShowAlert({\n        severity: 'error',\n        message: 'Error al eliminar el proyecto'\n      });\n    }\n  };\n  const handleActualizarProyecto = id => {\n    navigate(`/gestiones/editar-proyectos/${id}`);\n  };\n  const handleVerDetalles = id => {\n    navigate(`/gestiones/crear-hitos/${id}`);\n  };\n  useEffect(() => {\n    if (showAlert) {\n      if (alertTimeout.current) {\n        clearTimeout(alertTimeout.current);\n      }\n      alertTimeout.current = setTimeout(() => {\n        setShowAlert(null);\n      }, 3000);\n    }\n    return () => {\n      if (alertTimeout.current) {\n        clearTimeout(alertTimeout.current);\n      }\n    };\n  }, [showAlert]);\n  const emptyRows = page > 0 ? Math.max(0, (1 + page) * rowsPerPage - proyectos.length) : 0;\n  const hasCreateProyect = permissions.some(permission => permission.MenuID === 12);\n  const hasCreateHito = permissions.some(permission => permission.MenuID === 14); // Cambia '8' según tu lógica de permisos\n  const hasCreatePrueba = permissions.some(permission => permission.MenuID === 20); // Cambia '8' según tu lógica de permisos\n  const hasEditProyect = permissions.some(permission => permission.MenuID === 22); // Cambia '9' según tu lógica de permisos\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      padding: 2\n    },\n    children: [showAlert && /*#__PURE__*/_jsxDEV(AlertMessage, {\n      severity: showAlert.severity,\n      message: showAlert.message,\n      autoHideDuration: 1000,\n      sx: {\n        mb: 5\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(Grid, {\n      container: true,\n      spacing: 2,\n      alignItems: \"center\",\n      sx: {\n        marginBottom: '50px',\n        width: '100%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          label: \"Buscar proyecto\",\n          variant: \"outlined\",\n          value: search,\n          onChange: e => setSearch(e.target.value),\n          sx: {\n            width: 300\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        item: true,\n        sx: {\n          marginLeft: 'auto'\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          color: \"primary\",\n          onClick: handleCrearProyecto,\n          disabled: !hasCreateProyect,\n          children: \"Crear proyecto\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n      component: Paper,\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        sx: {\n          minWidth: 500\n        },\n        \"aria-label\": \"custom pagination table\",\n        children: [/*#__PURE__*/_jsxDEV(TableHead, {\n          children: /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"Crear hitos\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: \"Proyecto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: \"Descripci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: \"Fecha Inicio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: \"Fecha de Finalizaci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: \"Estado\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: \"Presupuesto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: \"Usuario Responsable\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: \"Fecha de creaci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: \"\\xDAltima Modificaci\\xF3n\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: \"Test Plant\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: \"Acciones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 186,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n          children: [(rowsPerPage > 0 ? proyectos.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage) : proyectos).map(proyecto => /*#__PURE__*/_jsxDEV(TableRow, {\n            children: [/*#__PURE__*/_jsxDEV(TableCell, {\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                onClick: () => handleVerDetalles(proyecto.proyecto_id),\n                color: \"primary\",\n                \"aria-label\": \"crear hitos\",\n                disabled: !hasCreateHito,\n                children: /*#__PURE__*/_jsxDEV(VisibilityIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: proyecto.nombre\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: proyecto.descripcion\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: new Date(proyecto.fecha_inicio).toLocaleDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: new Date(proyecto.fecha_finalizacion).toLocaleDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: proyecto.estado\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: proyecto.presupuesto\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: proyecto.u_usuario\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: new Date(proyecto.fecha_creacion).toLocaleDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"left\",\n              children: new Date(proyecto.fecha_actualizacion).toLocaleDateString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              children: /*#__PURE__*/_jsxDEV(IconButton, {\n                onClick: () => handleVerPorHitos(proyecto.proyecto_id),\n                color: \"primary\",\n                \"aria-label\": \"Ver pruebas\",\n                disabled: !hasCreatePrueba,\n                children: /*#__PURE__*/_jsxDEV(VisibilityIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 229,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n              align: \"center\",\n              children: /*#__PURE__*/_jsxDEV(Box, {\n                sx: {\n                  display: 'flex',\n                  justifyContent: 'center',\n                  alignItems: 'center'\n                },\n                children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                  onClick: () => handleActualizarProyecto(proyecto.proyecto_id),\n                  color: \"primary\",\n                  \"aria-label\": \"editar\",\n                  sx: {\n                    marginRight: 1\n                  },\n                  children: /*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 240,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                  onClick: () => handleOpenDialog(proyecto.proyecto_id),\n                  color: \"secondary\",\n                  \"aria-label\": \"eliminar\",\n                  sx: {\n                    marginLeft: 1\n                  },\n                  children: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 19\n            }, this)]\n          }, proyecto.proyecto_id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 17\n          }, this)), emptyRows > 0 && /*#__PURE__*/_jsxDEV(TableRow, {\n            style: {\n              height: 53 * emptyRows\n            },\n            children: /*#__PURE__*/_jsxDEV(TableCell, {\n              colSpan: 6\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(TableFooter, {\n          children: /*#__PURE__*/_jsxDEV(TableRow, {\n            children: /*#__PURE__*/_jsxDEV(TablePagination, {\n              rowsPerPageOptions: [5, 10, 25],\n              colSpan: 3,\n              count: proyectos.length,\n              rowsPerPage: rowsPerPage,\n              page: page,\n              SelectProps: {\n                inputProps: {\n                  'aria-label': 'Filas por página'\n                },\n                native: true\n              },\n              onPageChange: handlePageChange,\n              onRowsPerPageChange: handleRowsPerPageChange,\n              ActionsComponent: TablePaginationActions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmDeleteDialog, {\n      open: openDialog,\n      onClose: handleCloseDialog,\n      onConfirm: handleEliminarProyecto // Update this to pass onConfirm correctly\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 150,\n    columnNumber: 7\n  }, this);\n};\n_s2(Proyectos, \"Ix1Hd9kyarJYb3AzFp6WLsdyXys=\", false, function () {\n  return [useNavigate];\n});\n_c2 = Proyectos;\nexport default Proyectos;\nvar _c, _c2;\n$RefreshReg$(_c, \"TablePaginationActions\");\n$RefreshReg$(_c2, \"Proyectos\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Button","TextField","Table","TableBody","TableCell","TableContainer","TableFooter","TablePagination","TableRow","TableHead","Paper","Box","Grid","IconButton","useNavigate","useTheme","FirstPageIcon","KeyboardArrowLeft","KeyboardArrowRight","LastPageIcon","EditIcon","DeleteIcon","VisibilityIcon","AlertMessage","ConfirmDeleteDialog","jsxDEV","_jsxDEV","TablePaginationActions","props","_s","theme","count","page","rowsPerPage","onPageChange","handleFirstPageButtonClick","event","handleBackButtonClick","handleNextButtonClick","handleLastPageButtonClick","Math","max","ceil","sx","flexShrink","ml","children","onClick","disabled","direction","fileName","_jsxFileName","lineNumber","columnNumber","_c","Proyectos","permissions","_s2","openDialog","setOpenDialog","selectedProyectoId","setSelectedProyectoId","showAlert","setShowAlert","proyectos","setProyectos","search","setSearch","setPage","setRowsPerPage","navigate","alertTimeout","handleOpenDialog","proyectoId","handleCloseDialog","handleVerPorHitos","id","fetchProyectos","searchTerm","response","fetch","data","json","handlePageChange","newPage","handleRowsPerPageChange","parseInt","target","value","handleCrearProyecto","handleEliminarProyecto","method","ok","severity","message","error","console","handleActualizarProyecto","handleVerDetalles","current","clearTimeout","setTimeout","emptyRows","length","hasCreateProyect","some","permission","MenuID","hasCreateHito","hasCreatePrueba","hasEditProyect","padding","autoHideDuration","mb","container","spacing","alignItems","marginBottom","width","item","label","variant","onChange","e","marginLeft","color","component","minWidth","align","slice","map","proyecto","proyecto_id","nombre","descripcion","Date","fecha_inicio","toLocaleDateString","fecha_finalizacion","estado","presupuesto","u_usuario","fecha_creacion","fecha_actualizacion","display","justifyContent","marginRight","style","height","colSpan","rowsPerPageOptions","SelectProps","inputProps","native","onRowsPerPageChange","ActionsComponent","open","onClose","onConfirm","_c2","$RefreshReg$"],"sources":["C:/Users/Administrador/Documents/Proyectos/control_calidad/frontend/src/pages/Gestiones/Proyectos.js"],"sourcesContent":["  import React, { useState, useEffect, useRef } from 'react';\r\n  import { Button, TextField, Table, TableBody, TableCell, TableContainer, TableFooter, TablePagination, TableRow, TableHead, Paper, Box, Grid, IconButton } from '@mui/material';\r\n  import { useNavigate } from 'react-router-dom';\r\n  import { useTheme } from '@mui/material/styles';\r\n  import FirstPageIcon from '@mui/icons-material/FirstPage';\r\n  import KeyboardArrowLeft from '@mui/icons-material/KeyboardArrowLeft';\r\n  import KeyboardArrowRight from '@mui/icons-material/KeyboardArrowRight';\r\n  import LastPageIcon from '@mui/icons-material/LastPage';\r\n  import EditIcon from '@mui/icons-material/Edit';\r\n  import DeleteIcon from '@mui/icons-material/Delete';\r\n  import VisibilityIcon from '@mui/icons-material/Visibility';\r\n  import AlertMessage from '../../components/AlertMessage'; // Alert component\r\n  import ConfirmDeleteDialog from '../../components/ConfirmDeleteDialog'; // Confirmation dialog component\r\n\r\n  function TablePaginationActions(props) {\r\n    const theme = useTheme();\r\n    const { count, page, rowsPerPage, onPageChange } = props;\r\n\r\n    const handleFirstPageButtonClick = (event) => {\r\n      onPageChange(event, 0);\r\n    };\r\n\r\n    const handleBackButtonClick = (event) => {\r\n      onPageChange(event, page - 1);\r\n    };\r\n\r\n    const handleNextButtonClick = (event) => {\r\n      onPageChange(event, page + 1);\r\n    };\r\n\r\n    const handleLastPageButtonClick = (event) => {\r\n      onPageChange(event, Math.max(0, Math.ceil(count / rowsPerPage) - 1));\r\n    };\r\n\r\n    return (\r\n      <Box sx={{ flexShrink: 0, ml: 2.5 }}>\r\n        <IconButton onClick={handleFirstPageButtonClick} disabled={page === 0} aria-label=\"first page\">\r\n          {theme.direction === 'rtl' ? <LastPageIcon /> : <FirstPageIcon />}\r\n        </IconButton>\r\n        <IconButton onClick={handleBackButtonClick} disabled={page === 0} aria-label=\"previous page\">\r\n          {theme.direction === 'rtl' ? <KeyboardArrowRight /> : <KeyboardArrowLeft />}\r\n        </IconButton>\r\n        <IconButton onClick={handleNextButtonClick} disabled={page >= Math.ceil(count / rowsPerPage) - 1} aria-label=\"next page\">\r\n          {theme.direction === 'rtl' ? <KeyboardArrowLeft /> : <KeyboardArrowRight />}\r\n        </IconButton>\r\n        <IconButton onClick={handleLastPageButtonClick} disabled={page >= Math.ceil(count / rowsPerPage) - 1} aria-label=\"last page\">\r\n          {theme.direction === 'rtl' ? <FirstPageIcon /> : <LastPageIcon />}\r\n        </IconButton>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  const Proyectos = ({ permissions }) => {\r\n    const [openDialog, setOpenDialog] = useState(false);\r\n    const [selectedProyectoId, setSelectedProyectoId] = useState(null);\r\n    const [showAlert, setShowAlert] = useState(null);\r\n    const [proyectos, setProyectos] = useState([]);\r\n    const [search, setSearch] = useState('');\r\n    const [page, setPage] = useState(0);\r\n    const [rowsPerPage, setRowsPerPage] = useState(5);\r\n    const navigate = useNavigate();\r\n    const alertTimeout = useRef(null);\r\n\r\n    const handleOpenDialog = (proyectoId) => {\r\n      setSelectedProyectoId(proyectoId);\r\n      setOpenDialog(true);\r\n    };\r\n\r\n    const handleCloseDialog = () => {\r\n      setOpenDialog(false);\r\n      setSelectedProyectoId(null);\r\n    };\r\n    // Handle task creation\r\n    const handleVerPorHitos = (id) => {\r\n      navigate(`/proyectos/hitos-pruebas/${id}`);  // Redireccion a la página de crear tarea\r\n    };\r\n\r\n    const fetchProyectos = async (searchTerm = '') => {\r\n      const response = await fetch(`http://localhost:5000/api/proyectos/proyectos?search=${searchTerm}`);\r\n      const data = await response.json();\r\n      setProyectos(data);\r\n    };\r\n\r\n    useEffect(() => {\r\n      fetchProyectos(search);\r\n    }, [search]);\r\n\r\n    const handlePageChange = (event, newPage) => {\r\n      setPage(newPage);\r\n    };\r\n\r\n    const handleRowsPerPageChange = (event) => {\r\n      setRowsPerPage(parseInt(event.target.value, 10));\r\n      setPage(0);\r\n    };\r\n\r\n    const handleCrearProyecto = () => {\r\n      navigate('/gestiones/crear-proyectos');\r\n    };\r\n\r\n    const handleEliminarProyecto = async () => {\r\n      try {\r\n        const response = await fetch(`http://localhost:5000/api/proyectos/proyectoDelete/${selectedProyectoId}`, {\r\n          method: 'DELETE',\r\n        });\r\n        if (response.ok) {\r\n          setShowAlert({ severity: 'success', message: 'Proyecto eliminado exitosamente' });\r\n          fetchProyectos(search);\r\n        } else {\r\n          setShowAlert({ severity: 'error', message: 'Error al eliminar el proyecto' });\r\n        }\r\n      } catch (error) {\r\n        console.error('Error al eliminar el proyecto:', error);\r\n        setShowAlert({ severity: 'error', message: 'Error al eliminar el proyecto' });\r\n      }\r\n    };\r\n\r\n    const handleActualizarProyecto = (id) => {\r\n      navigate(`/gestiones/editar-proyectos/${id}`);\r\n    };\r\n\r\n    const handleVerDetalles = (id) => {\r\n      navigate(`/gestiones/crear-hitos/${id}`);\r\n    };\r\n\r\n    useEffect(() => {\r\n      if (showAlert) {\r\n        if (alertTimeout.current) {\r\n          clearTimeout(alertTimeout.current);\r\n        }\r\n        alertTimeout.current = setTimeout(() => {\r\n          setShowAlert(null);\r\n        }, 3000);\r\n      }\r\n\r\n      return () => {\r\n        if (alertTimeout.current) {\r\n          clearTimeout(alertTimeout.current);\r\n        }\r\n      };\r\n    }, [showAlert]);\r\n\r\n    const emptyRows = page > 0 ? Math.max(0, (1 + page) * rowsPerPage - proyectos.length) : 0;\r\n    const hasCreateProyect = permissions.some(permission => permission.MenuID === 12);\r\n    const hasCreateHito= permissions.some(permission => permission.MenuID === 14); // Cambia '8' según tu lógica de permisos\r\n    const hasCreatePrueba= permissions.some(permission => permission.MenuID === 20); // Cambia '8' según tu lógica de permisos\r\n    const hasEditProyect = permissions.some(permission => permission.MenuID === 22); // Cambia '9' según tu lógica de permisos\r\n  \r\n    return (\r\n      <Box sx={{ padding: 2 }}>\r\n        {showAlert && (\r\n          <AlertMessage severity={showAlert.severity} message={showAlert.message} autoHideDuration={1000} sx={{ mb: 5 }} />\r\n        )}\r\n        <Grid container spacing={2} alignItems=\"center\" sx={{ marginBottom: '50px', width: '100%' }}>\r\n          <Grid item>\r\n            <TextField\r\n              label=\"Buscar proyecto\"\r\n              variant=\"outlined\"\r\n              value={search}\r\n              onChange={(e) => setSearch(e.target.value)}\r\n              sx={{ width: 300 }}\r\n            />\r\n          </Grid>\r\n          <Grid item sx={{ marginLeft: 'auto' }}>\r\n            <Button variant=\"contained\" color=\"primary\" onClick={handleCrearProyecto} disabled={!hasCreateProyect}>\r\n              Crear proyecto\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <TableContainer component={Paper}>\r\n          <Table sx={{ minWidth: 500 }} aria-label=\"custom pagination table\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Crear hitos</TableCell>\r\n                <TableCell align=\"left\">Proyecto</TableCell>\r\n                <TableCell align=\"left\">Descripción</TableCell>\r\n                <TableCell align=\"left\">Fecha Inicio</TableCell>\r\n                <TableCell align=\"left\">Fecha de Finalización</TableCell>\r\n                <TableCell align=\"left\">Estado</TableCell>\r\n                <TableCell align=\"left\">Presupuesto</TableCell>\r\n                <TableCell align=\"left\">Usuario Responsable</TableCell>\r\n                <TableCell align=\"left\">Fecha de creación</TableCell>\r\n                <TableCell align=\"left\">Última Modificación</TableCell>\r\n                <TableCell>Test Plant</TableCell>\r\n                <TableCell align=\"center\">Acciones</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {(rowsPerPage > 0\r\n                ? proyectos.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\r\n                : proyectos\r\n              ).map((proyecto) => (\r\n                <TableRow key={proyecto.proyecto_id}>\r\n                  <TableCell>\r\n                    <IconButton\r\n                      onClick={() => handleVerDetalles(proyecto.proyecto_id)}\r\n                      color=\"primary\"\r\n                      aria-label=\"crear hitos\"\r\n                      disabled={!hasCreateHito}\r\n                    >\r\n                      <VisibilityIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                  <TableCell align=\"left\">{proyecto.nombre}</TableCell>\r\n                  <TableCell align=\"left\">{proyecto.descripcion}</TableCell>\r\n                  <TableCell align=\"left\">\r\n                    {new Date(proyecto.fecha_inicio).toLocaleDateString()}\r\n                  </TableCell>\r\n                  <TableCell align=\"left\">\r\n                    {new Date(proyecto.fecha_finalizacion).toLocaleDateString()}\r\n                  </TableCell>\r\n                  <TableCell align=\"left\">{proyecto.estado}</TableCell>\r\n                  <TableCell align=\"left\">{proyecto.presupuesto}</TableCell>\r\n                  <TableCell align=\"left\">{proyecto.u_usuario}</TableCell>\r\n                  <TableCell align=\"left\">\r\n                    {new Date(proyecto.fecha_creacion).toLocaleDateString()}\r\n                  </TableCell>\r\n                  <TableCell align=\"left\">\r\n                    {new Date(proyecto.fecha_actualizacion).toLocaleDateString()}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    <IconButton\r\n                      onClick={() => handleVerPorHitos(proyecto.proyecto_id)}\r\n                      color=\"primary\"\r\n                      aria-label=\"Ver pruebas\"\r\n                      disabled={!hasCreatePrueba}\r\n                    >\r\n                      <VisibilityIcon />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                  <TableCell align=\"center\">\r\n                    <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\r\n                      <IconButton\r\n                        onClick={() => handleActualizarProyecto(proyecto.proyecto_id)}\r\n                        color=\"primary\"\r\n                        aria-label=\"editar\"\r\n                        sx={{ marginRight: 1 }}\r\n                      >\r\n                        <EditIcon />\r\n                      </IconButton>\r\n                      <IconButton\r\n                        onClick={() => handleOpenDialog(proyecto.proyecto_id)}\r\n                        color=\"secondary\"\r\n                        aria-label=\"eliminar\"\r\n                        sx={{ marginLeft: 1 }}\r\n                      >\r\n                        <DeleteIcon />\r\n                      </IconButton>\r\n                    </Box>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n              {emptyRows > 0 && (\r\n                <TableRow style={{ height: 53 * emptyRows }}>\r\n                  <TableCell colSpan={6} />\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n            <TableFooter>\r\n              <TableRow>\r\n                <TablePagination\r\n                  rowsPerPageOptions={[5, 10, 25]}\r\n                  colSpan={3}\r\n                  count={proyectos.length}\r\n                  rowsPerPage={rowsPerPage}\r\n                  page={page}\r\n                  SelectProps={{\r\n                    inputProps: { 'aria-label': 'Filas por página' },\r\n                    native: true,\r\n                  }}\r\n                  onPageChange={handlePageChange}\r\n                  onRowsPerPageChange={handleRowsPerPageChange}\r\n                  ActionsComponent={TablePaginationActions}\r\n                />\r\n              </TableRow>\r\n            </TableFooter>\r\n          </Table>\r\n        </TableContainer>\r\n\r\n        <ConfirmDeleteDialog\r\n          open={openDialog}\r\n          onClose={handleCloseDialog}\r\n          onConfirm={handleEliminarProyecto} // Update this to pass onConfirm correctly\r\n        />\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  export default Proyectos;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}